{"remainingRequest":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\WebProject\\contractmanager\\client\\src\\components\\register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Code\\WebProject\\contractmanager\\client\\src\\components\\register.vue","mtime":1685549273151},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685549481424},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1685549482541},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685549481424},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1685549482668}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJyZWdpc3RlciIsCiAgICBkYXRhKCkgewogICAgICAgIHZhciB2YWxpZGF0ZVBhc3MyID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+WGjeasoei+k+WFpeWvhueggScpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdGhpcy5yZWdpc3RlckZvcm0ucGFzc3dkKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+S4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEnKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc3RhdGU6IC0xLAogICAgICAgICAgICB0ZXh0OiAi5Yib5bu66LSm5Y+3IiwKICAgICAgICAgICAgaXNEaXNhYmxlZDogZmFsc2UsCiAgICAgICAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgICAgICAgIHJlZ2lzdGVyRm9ybTogewogICAgICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgICAgICBwYXNzd2Q6ICcnLAogICAgICAgICAgICAgICAgcGFzc3dkYWdhaW46ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICBuYW1lOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeeUqOaIt+WQjSIsIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcGFzc3dkOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBtaW46IDYsIG1lc3NhZ2U6ICLlr4bnoIHlv4XpobvlpKfkuo42IiwgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHBhc3N3ZGFnYWluOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBtaW46IDYsIG1lc3NhZ2U6ICLlr4bnoIHlv4XpobvlpKfkuo42IiwgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcjogdmFsaWRhdGVQYXNzMiwgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgIH0KICAgIH0sCgogICAgbWV0aG9kczogewogICAgICAgIGNsaWNrUmVnaXN0ZXIoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzTG9hZGluZykgewogICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gIiIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy4kcmVmc1sicmVnaXN0ZXJGb3JtIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZih2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLiRyZWdpc3RlclVybCwKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IHRoaXMucmVnaXN0ZXJGb3JtLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd2Q6IHRoaXMuJG1kNSh0aGlzLnJlZ2lzdGVyRm9ybS5wYXNzd2QgKyB0aGlzLiRzYWx0KQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXQgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGl0IGluIGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGl0KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2l0XSkgKyAnJicKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQKICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9CiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdGUgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuJGxvZ2luVXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogdGhpcy5yZWdpc3RlckZvcm0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dkOiB0aGlzLiRtZDUodGhpcy5yZWdpc3RlckZvcm0ucGFzc3dkICsgdGhpcy4kc2FsdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJldCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpdCBpbiBkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXQgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGl0KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW2l0XSkgKyAnJicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ30KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gcmVzLmRhdGEuc3RhdGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudXNlck5hbWUgPSB0aGlzLnJlZ2lzdGVyRm9ybS5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnBhc3N3ZCA9IHRoaXMucmVnaXN0ZXJGb3JtLnBhc3N3ZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiA9IHJlcy5kYXRhLnRva2VuOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmdyb3VwID0gcmVzLmRhdGEuZ3JvdXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9tYWluRnJhbWUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCLotKblj7flt7LlrZjlnKjvvIEiKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH1lbHNlICB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gIuWIm+W7uui0puaItyI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKCiAgICAgICAgbG9naW5Qcm9jZXNzKCkgewogICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9tYWluRnJhbWUnKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy50ZXh0ID0gIueZu+W9lSI7CiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjbGlja0xvZ2luKCkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIikKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"register\">\r\n\r\n        <h1 style=\"text-align: center\">注册</h1>\r\n        <el-form ref=\"registerForm\" :model=\"registerForm\" :rules=\"rules\" label-width=\"100px\">\r\n            <el-form-item label=\"用户名：\" prop=\"name\">\r\n                <el-input v-model=\"registerForm.name\" placeholder=\"请输入用户名\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"密码：\" prop=\"passwd\">\r\n                <el-input v-model=\"registerForm.passwd\" placeholder=\"请输入密码\" show-password clearable></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"再次密码：\" prop=\"passwdagain\">\r\n                <el-input v-model=\"registerForm.passwdagain\" placeholder=\"请确认密码\" show-password clearable></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label-width=\"0px\">\r\n                <el-button size=\"medium\" style=\"border-color: #ffffff; margin-right: 43%; left: 0px;\" @click=\"clickLogin\">登录</el-button>\r\n                <el-button type=\"primary\" size=\"medium\" :loading = \"isLoading\"  @click=\"clickRegister\">{{text}}</el-button>\r\n            </el-form-item>\r\n\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"register\",\r\n        data() {\r\n            var validatePass2 = (rule, value, callback) => {\r\n                if (value === '') {\r\n                    callback(new Error('请再次输入密码'));\r\n                } else if (value !== this.registerForm.passwd) {\r\n                    callback(new Error('两次输入密码不一致!'));\r\n                } else {\r\n                    callback();\r\n                }\r\n            };\r\n\r\n            return {\r\n                state: -1,\r\n                text: \"创建账号\",\r\n                isDisabled: false,\r\n                isLoading: false,\r\n                registerForm: {\r\n                    name: '',\r\n                    passwd: '',\r\n                    passwdagain: ''\r\n                },\r\n                rules: {\r\n                    name: [\r\n                        {\r\n                            required: true, message: \"请输入用户名\", trigger: 'blur'\r\n                        },\r\n                    ],\r\n                    passwd: [\r\n                        {\r\n                            required: true, message: \"请输入密码\", trigger: 'blur'\r\n                        },\r\n                        {\r\n                            min: 6, message: \"密码必须大于6\", trigger: 'blur'\r\n                        }\r\n                    ],\r\n                    passwdagain: [\r\n                        {\r\n                            required: true, message: \"请输入密码\", trigger: 'blur'\r\n                        },\r\n                        {\r\n                            min: 6, message: \"密码必须大于6\", trigger: 'blur'\r\n                        },\r\n                        {\r\n                            validator: validatePass2, trigger: 'blur'\r\n                        }\r\n                    ]\r\n                },\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            clickRegister() {\r\n                if (this.isLoading) {\r\n                    this.text = \"\"\r\n                }\r\n\r\n                this.$refs[\"registerForm\"].validate((valid) => {\r\n                    if(valid) {\r\n                        this.$axios({\r\n                            url: this.$registerUrl,\r\n                            method: 'post',\r\n                            data: {\r\n                                user: this.registerForm.name,\r\n                                passwd: this.$md5(this.registerForm.passwd + this.$salt)\r\n                            },\r\n                            transformRequest: [function (data) {\r\n                                let ret = '';\r\n                                for (let it in data) {\r\n                                    ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n                                }\r\n                                return ret\r\n                            }],\r\n                            headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n                        }).then(res => {\r\n                            if (res.data.state === 0) {\r\n                                this.$axios({\r\n                                    url: this.$loginUrl,\r\n                                    method: 'post',\r\n                                    data: {\r\n                                        user: this.registerForm.name,\r\n                                        passwd: this.$md5(this.registerForm.passwd + this.$salt)\r\n                                    },\r\n\r\n                                    transformRequest: [function (data) {\r\n                                        let ret = '';\r\n                                        for (let it in data) {\r\n                                            ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n                                        }\r\n                                        return ret\r\n                                    }],\r\n                                    headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n                                    // headers: {\r\n                                    //     'Content-Type': 'application/x-www-form-urlencoded'\r\n                                    // }\r\n                                }).then(res => {\r\n                                    this.state = res.data.state;\r\n                                    this.$store.state.userName = this.registerForm.name;\r\n                                    this.$store.state.passwd = this.registerForm.passwd;\r\n                                    this.$store.state.token = res.data.token;\r\n                                    this.$store.state.group = res.data.group;\r\n                                    this.$router.push('/mainFrame')\r\n                                })\r\n                            } else {\r\n                                alert(\"账号已存在！\")\r\n                            }\r\n                        })\r\n                    }else  {\r\n                        this.text = \"创建账户\";\r\n                        this.isLoading = false;\r\n                        // console.log('error submit!!');\r\n                        return false;\r\n                    }\r\n                })\r\n            },\r\n\r\n            loginProcess() {\r\n                if (this.state === 0) {\r\n                    this.$router.push('/mainFrame')\r\n                } else {\r\n                    this.text = \"登录\";\r\n                    this.isLoading = false;\r\n                }\r\n            },\r\n            clickLogin() {\r\n                this.$router.push(\"/login\")\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .register {\r\n        margin: auto;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        width: 25rem;\r\n        position: absolute;\r\n        background-color: white;\r\n        padding: 20px 20px 10px 20px;\r\n        border-radius: 10px;\r\n        box-shadow: 0px 15px 25px 0px rgba(0, 0, 0, 0.11);\r\n    }\r\n\r\n</style>\r\n"]}]}