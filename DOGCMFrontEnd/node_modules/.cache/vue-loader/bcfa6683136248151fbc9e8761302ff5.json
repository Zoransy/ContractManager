{"remainingRequest":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Code\\WebProject\\contractmanager\\client\\src\\components\\addCustomer.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Code\\WebProject\\contractmanager\\client\\src\\components\\addCustomer.vue","mtime":1685549273151},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685549481424},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":1685549482541},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1685549481424},{"path":"D:\\Code\\WebProject\\contractmanager\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1685549482668}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJhZGRDdXN0b21lciIsCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGN1c0Zvcm06IHsKICAgICAgICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgICAgICAgdGVsOiAnJywKICAgICAgICAgICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgICAgICAgICAgZmF4OiAnJywKICAgICAgICAgICAgICAgIG1haWw6ICcnLAogICAgICAgICAgICAgICAgYmFuazogJycsCiAgICAgICAgICAgICAgICBhY2NvdW50OiAnJywKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXlrqLmiLflp5PlkI0iLCB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBjbGVhbkpzb24oanNvbikgewogICAgICAgICAgICBmb3IgKGxldCBkcmFmdEZvcm1LZXkgaW4ganNvbikgewogICAgICAgICAgICAgICAganNvbltkcmFmdEZvcm1LZXldID0gJycKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4ganNvbjsKICAgICAgICB9LAoKICAgICAgICBwb3N0Q3VzdG9tZXIoKSB7CgogICAgICAgICAgICB0aGlzLiRyZWZzWyJjdXNGb3JtIl0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRheGlvcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy4kdXJsICsgIi9jdXN0b21lci9hZGRDdXN0b21lciIsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLmN1c0Zvcm0ubmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IHRoaXMuY3VzRm9ybS5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVsOiB0aGlzLmN1c0Zvcm0udGVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmF4OiB0aGlzLmN1c0Zvcm0uZmF4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpbDogdGhpcy5jdXNGb3JtLm1haWwsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYW5rOiB0aGlzLmN1c0Zvcm0uYmFuaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IHRoaXMuY3VzRm9ybS5hY2NvdW50CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJldCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaXQgaW4gZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldCArPSBlbmNvZGVVUklDb21wb25lbnQoaXQpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFbaXRdKSArICcmJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldAogICAgICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ30KICAgICAgICAgICAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZSA9PT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfmt7vliqDlrqLmiLflpLHotKXvvIEnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0ZSA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+aIkOWKn+a3u+WKoOWuouaIt++8gScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXNGb3JtID0gdGhpcy5jbGVhbkpzb24odGhpcy5jdXNGb3JtKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKCgogICAgICAgIHJlc2V0SnNvbigpIHsKICAgICAgICAgICAgdGhpcy5jdXNGb3JtID0gdGhpcy5jbGVhbkpzb24odGhpcy5jdXNGb3JtKQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["addCustomer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA","file":"addCustomer.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\r\n    <el-form style=\"left: 20%;\" ref=\"cusForm\" :model=\"cusForm\" :rules=\"rules\" label-position=\"left\" label-width=\"80px\">\r\n        <el-form-item label=\"客户名称\" prop=\"name\">\r\n            <el-input v-model=\"cusForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"客户电话\" prop=\"tel\">\r\n            <el-input v-model=\"cusForm.tel\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"客户地址\" prop=\"address\">\r\n            <el-input v-model=\"cusForm.address\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"客户传真\" prop=\"fax\">\r\n            <el-input v-model=\"cusForm.fax\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"客户邮箱\" prop=\"mail\">\r\n            <el-input v-model=\"cusForm.mail\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"银行名称\" prop=\"bank\">\r\n            <el-input v-model=\"cusForm.bank\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"银行账号\" prop=\"account\">\r\n            <el-input v-model=\"cusForm.account\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n            <el-col :span=\"15\">\r\n                <el-button type=\"primary\" @click=\"postCustomer\">确定</el-button>\r\n            </el-col>\r\n            <el-col :span=\"9\">\r\n                <el-button type=\"danger\" @click=\"resetJson\">重置</el-button>\r\n            </el-col>\r\n        </el-form-item>\r\n    </el-form>\r\n\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"addCustomer\",\r\n        data() {\r\n            return {\r\n                cusForm: {\r\n                    name: '',\r\n                    tel: '',\r\n                    address: '',\r\n                    fax: '',\r\n                    mail: '',\r\n                    bank: '',\r\n                    account: '',\r\n                },\r\n\r\n                rules: {\r\n                    name: {\r\n                        required: true, message: \"请输入客户姓名\", trigger: 'blur'\r\n                    },\r\n\r\n                }\r\n            }\r\n        },\r\n        methods: {\r\n            cleanJson(json) {\r\n                for (let draftFormKey in json) {\r\n                    json[draftFormKey] = ''\r\n                }\r\n                return json;\r\n            },\r\n\r\n            postCustomer() {\r\n\r\n                this.$refs[\"cusForm\"].validate((valid) => {\r\n                    if (valid) {\r\n                        this.$axios({\r\n                            url: this.$url + \"/customer/addCustomer\",\r\n                            method: 'post',\r\n                            data: {\r\n                                token: this.$store.state.token,\r\n                                name: this.cusForm.name,\r\n                                address: this.cusForm.address,\r\n                                tel: this.cusForm.tel,\r\n                                fax: this.cusForm.fax,\r\n                                mail: this.cusForm.mail,\r\n                                bank: this.cusForm.bank,\r\n                                account: this.cusForm.account\r\n                            },\r\n                            transformRequest: [function (data) {\r\n                                let ret = '';\r\n                                for (let it in data) {\r\n                                    ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&'\r\n                                }\r\n                                return ret\r\n                            }],\r\n                            headers: {'Content-Type': 'application/x-www-form-urlencoded'}\r\n                        }).then(res => {\r\n                            if (res.data.state === -1) {\r\n                                this.$notify({\r\n                                    title: '失败',\r\n                                    message: '添加客户失败！',\r\n                                    type: \"error\"\r\n                                })\r\n                            }\r\n\r\n                            if (res.data.state === 0) {\r\n                                this.$notify({\r\n                                    title: '成功',\r\n                                    message: '成功添加客户！',\r\n                                    type: \"success\"\r\n                                })\r\n                                this.cusForm = this.cleanJson(this.cusForm)\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n            },\r\n\r\n\r\n            resetJson() {\r\n                this.cusForm = this.cleanJson(this.cusForm)\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}